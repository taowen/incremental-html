<!-- index.html -->
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Demo</title>
    <link rel="shortcut icon" href="#" />
</head>
<body bind:store="$$.reactive({ items: ['fix bike', 'buy tomato'] })">
    <template id="tpl-todo-item">
        <!-- this.$props provided by renderTemplate -->
        <li>
            <span bind:textContent="this.$props.task"></span>
            <button on:click="
                const items = [...document.body.store.items];
                const index = items.indexOf(this.$props.task);
                if (index !== -1) {
                    items.splice(index, 1);
                    document.body.store.items = items;
                }
            ">x</button>
        </li>
    </template>
    <form on:submit="
        const [e] = arguments;
        e.preventDefault();
        const formData = new FormData(e.target);
        if(formData.get('task')) {
            document.body.store.items.push(formData.get('task'));
            e.target.reset();
        }
    ">
        <input type="text" name="task" />
        <button>add</button>
    </form>
    <ul bind:childNodes="
        document.body.store.items.map(
            item => $$.renderTemplate('#tpl-todo-item', { task: item })
        );" />
    <script type="module">
        import { startDomObserver, reactive, renderTemplate } from '@incremental-html/reactivity';
        window.$$ = { reactive, renderTemplate }
        // for properties like bind:xxx or on:xxx
        startDomObserver();
    </script>
</body>

</html>