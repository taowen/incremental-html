<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@incremental-html/reactivity</title><meta name="description" content="Documentation for @incremental-html/reactivity"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@incremental-html/reactivity</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>@incremental-html/reactivity </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#incremental-html" id="incremental-html" style="color: inherit; text-decoration: none;">
  <h1>incremental-html</h1>
</a>
<p>Render in server side, using html as &quot;virtual DOM&quot; to update ui incrementally. The goal is making client side logic minimal so that we can release new version without update client, and we can implement native clients (Android, iOS, miniprogram) with similar web development experience and reusing server code between them.</p>
<p>Inspired by <a href="https://hotwired.dev/">https://hotwired.dev/</a> like <a href="https://github.com/taowen/awesome-html">previous effort</a>, incremental-html try to avoid re-inventing javascript, and try to be declaractive. The API to remember should be minimal, should program in normal javascript (compared to programming by turbo-stream/htmx action).</p>

<a href="#interaction-styles" id="interaction-styles" style="color: inherit; text-decoration: none;">
  <h2>interaction styles</h2>
</a>
<p>incremental-html want to enable following interaction styles</p>
<ul>
<li><input disabled="" type="checkbox"> load server generated page without waiting in blank state for too long, load as much as possible within a time budget, defer unfinished loading to second roundtrip</li>
<li><input disabled="" type="checkbox"> show loading indicator to allow other areas to show before everything ready, but not too many indicators</li>
<li><input disabled="" type="checkbox"> show error in area, instead of make whole page unusable</li>
<li><input disabled="" type="checkbox"> show result of my action without whole page refresh, keep uncommited edit state in other area</li>
<li><input disabled="" type="checkbox"> show feedback while typing, save extra click</li>
<li><input disabled="" type="checkbox"> show search results while typing, save extra click</li>
<li><input disabled="" type="checkbox"> if button click takes some time, show a processing indicator on the button to prevent user clicking twice</li>
<li><input disabled="" type="checkbox"> if server processing takes time, client may optimistically update before server confirm</li>
<li><input disabled="" type="checkbox"> show error next to the input</li>
<li><input disabled="" type="checkbox"> avoid multi page form, prefer minimal data entry initially, grow the form gradually as user provided more information</li>
<li><input disabled="" type="checkbox"> use infinite scroll to load more</li>
<li><input disabled="" type="checkbox"> use pull down to refresh</li>
<li><input disabled="" type="checkbox"> use swipe to show/hide more actions</li>
<li><input disabled="" type="checkbox"> use drag and drop to re-order items</li>
<li><input disabled="" type="checkbox"> use drag and drop to connect relationship</li>
<li><input disabled="" type="checkbox"> use half screen dialog to replace page jumping, use inline editing to replace modal dialog, avoid jumping around if possible</li>
<li><input disabled="" type="checkbox"> use mansonry to layout double columns, use screen space more efficiently</li>
<li><input disabled="" type="checkbox"> use FLIP layout animation to avoid content suddenly appear/disappear</li>
<li><input disabled="" type="checkbox"> preload next page, show progress, save the waiting time after switching</li>
<li><input disabled="" type="checkbox"> show current and next page side by side with transition animation, if no loading required</li>
<li><input disabled="" type="checkbox"> go back to previous page without reload waiting</li>
<li><input disabled="" type="checkbox"> perserve unsaved form in browser </li>
<li><input disabled="" type="checkbox"> render big page with many dom nodes, showing only the porition in viewport</li>
<li><input disabled="" type="checkbox"> multiple concurrent actions, end up with a consistent final state</li>
</ul>

<a href="#reusable-libraries" id="reusable-libraries" style="color: inherit; text-decoration: none;">
  <h2>reusable libraries</h2>
</a>
<p>There are several independent libraries to load/reload html without whole page refresh (just like F5, but without trashing client side input and state). When client side code handle some input, it either update the DOM directly somehow (such as showing form validation error), or it will use <code>@incremental-html/navigator</code> to refresh latest data from server.</p>
<ul>
<li>[web] navigator: update DOM via html diff to reload, go forward or go backward. unlike <a href="https://turbo.hotwired.dev/">https://turbo.hotwired.dev/</a> it is declarative instead of imperative. and navigator does not try to handle form submission.</li>
<li>[wechat] navigator-wechat: miniprogram version of <code>@incremental-html/navigator</code>, implemented in wechat miniprogram wxml language, unlike <a href="https://github.com/Tencent/kbone">https://github.com/Tencent/kbone</a> it does not implement a complete DOM/BOM api </li>
<li>[server] middleware: navigator will optionally share a page-state object with server to allow server to re-render the whole page with user input data (such as search criteria from a input box). HTTP GET does not allow body content, so we need to come up a protocol to pass user input data to refresh the page. @incremental-html/middleware make page-state available for express/connect user. unlike asp.net view-state, we do not intend to use page-state to handle form submission.</li>
<li>[server] jsx-to-html: optional tiny library to use jsx as a server side template language, which renders the page within given deadline, fallback to show loading indicator if data loading is too slow.</li>
<li>server code modification is optional. <code>@incremental-html/navigator</code> library can work with any existing server servering html written in any server side language. server modification is required only when additional features (page-state, render deadline) are needed.</li>
</ul>
<p>some optional libraries to make client side interaction code mordern and declarative, feels like vue/react, but working directly with real DOM instead of virtual DOM.</p>
<ul>
<li>[client] reactivity: a reactive version jquery to make page interactive, built on top of @vue/reactivity. unlike <a href="https://stimulus.hotwired.dev/">https://stimulus.hotwired.dev/</a> it is declarative instead of imperative.</li>
<li>[client] submit-form: the client part of validate-form, submit form-object to server and render validation errors back.</li>
<li>[server] form-object: read the form-object submitted from client, and send back validation errors. unlike page-state, form-object only exists in one http roundtrip.</li>
<li>libraries written in language other than javascript will be provided after <code>@incremental-html/navigator</code> library ported to more platform (Android, iOS)</li>
</ul>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-enum tsd-is-external"><a href="enums/ReactiveFlags.html" class="tsd-kind-icon">Reactive<wbr/>Flags</a></li><li class="tsd-kind-enum tsd-is-external"><a href="enums/TrackOpTypes.html" class="tsd-kind-icon">Track<wbr/>Op<wbr/>Types</a></li><li class="tsd-kind-enum tsd-is-external"><a href="enums/TriggerOpTypes.html" class="tsd-kind-icon">Trigger<wbr/>Op<wbr/>Types</a></li><li class="tsd-kind-class tsd-is-external"><a href="classes/EffectScope.html" class="tsd-kind-icon">Effect<wbr/>Scope</a></li><li class="tsd-kind-class tsd-has-type-parameter"><a href="classes/Feature.html" class="tsd-kind-icon">Feature</a></li><li class="tsd-kind-class tsd-has-type-parameter tsd-is-external"><a href="classes/ReactiveEffect.html" class="tsd-kind-icon">Reactive<wbr/>Effect</a></li><li class="tsd-kind-interface tsd-has-type-parameter tsd-is-external"><a href="interfaces/ComputedRef.html" class="tsd-kind-icon">Computed<wbr/>Ref</a></li><li class="tsd-kind-interface tsd-is-external"><a href="interfaces/DebuggerOptions.html" class="tsd-kind-icon">Debugger<wbr/>Options</a></li><li class="tsd-kind-interface tsd-is-external"><a href="interfaces/ReactiveEffectOptions.html" class="tsd-kind-icon">Reactive<wbr/>Effect<wbr/>Options</a></li><li class="tsd-kind-interface tsd-has-type-parameter tsd-is-external"><a href="interfaces/ReactiveEffectRunner.html" class="tsd-kind-icon">Reactive<wbr/>Effect<wbr/>Runner</a></li><li class="tsd-kind-interface tsd-has-type-parameter tsd-is-external"><a href="interfaces/Ref.html" class="tsd-kind-icon">Ref</a></li><li class="tsd-kind-interface tsd-is-external"><a href="interfaces/RefUnwrapBailTypes.html" class="tsd-kind-icon">Ref<wbr/>Unwrap<wbr/>Bail<wbr/>Types</a></li><li class="tsd-kind-interface tsd-has-type-parameter tsd-is-external"><a href="interfaces/WritableComputedOptions.html" class="tsd-kind-icon">Writable<wbr/>Computed<wbr/>Options</a></li><li class="tsd-kind-interface tsd-has-type-parameter tsd-is-external"><a href="interfaces/WritableComputedRef.html" class="tsd-kind-icon">Writable<wbr/>Computed<wbr/>Ref</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter tsd-is-external"><a href="modules.html#ComputedGetter" class="tsd-kind-icon">Computed<wbr/>Getter</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter tsd-is-external"><a href="modules.html#ComputedSetter" class="tsd-kind-icon">Computed<wbr/>Setter</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter tsd-is-external"><a href="modules.html#CustomRefFactory" class="tsd-kind-icon">Custom<wbr/>Ref<wbr/>Factory</a></li><li class="tsd-kind-type-alias tsd-is-external"><a href="modules.html#DebuggerEvent" class="tsd-kind-icon">Debugger<wbr/>Event</a></li><li class="tsd-kind-type-alias tsd-is-external"><a href="modules.html#DebuggerEventExtraInfo" class="tsd-kind-icon">Debugger<wbr/>Event<wbr/>Extra<wbr/>Info</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter tsd-is-external"><a href="modules.html#DeepReadonly" class="tsd-kind-icon">Deep<wbr/>Readonly</a></li><li class="tsd-kind-type-alias tsd-is-external"><a href="modules.html#EffectScheduler" class="tsd-kind-icon">Effect<wbr/>Scheduler</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter tsd-is-external"><a href="modules.html#ShallowReactive" class="tsd-kind-icon">Shallow<wbr/>Reactive</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter tsd-is-external"><a href="modules.html#ShallowRef" class="tsd-kind-icon">Shallow<wbr/>Ref</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter tsd-is-external"><a href="modules.html#ShallowUnwrapRef" class="tsd-kind-icon">Shallow<wbr/>Unwrap<wbr/>Ref</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter tsd-is-external"><a href="modules.html#ToRef" class="tsd-kind-icon">To<wbr/>Ref</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter tsd-is-external"><a href="modules.html#ToRefs" class="tsd-kind-icon">To<wbr/>Refs</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter tsd-is-external"><a href="modules.html#UnwrapNestedRefs" class="tsd-kind-icon">Unwrap<wbr/>Nested<wbr/>Refs</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter tsd-is-external"><a href="modules.html#UnwrapRef" class="tsd-kind-icon">Unwrap<wbr/>Ref</a></li><li class="tsd-kind-variable tsd-is-external"><a href="modules.html#ITERATE_KEY" class="tsd-kind-icon">ITERATE_<wbr/>KEY</a></li><li class="tsd-kind-variable"><a href="modules.html#mutationObserver" class="tsd-kind-icon">mutation<wbr/>Observer</a></li><li class="tsd-kind-function tsd-has-type-parameter tsd-is-external"><a href="modules.html#computed" class="tsd-kind-icon">computed</a></li><li class="tsd-kind-function tsd-has-type-parameter tsd-is-external"><a href="modules.html#customRef" class="tsd-kind-icon">custom<wbr/>Ref</a></li><li class="tsd-kind-function tsd-has-type-parameter tsd-is-external"><a href="modules.html#deferredComputed" class="tsd-kind-icon">deferred<wbr/>Computed</a></li><li class="tsd-kind-function tsd-has-type-parameter tsd-is-external"><a href="modules.html#effect" class="tsd-kind-icon">effect</a></li><li class="tsd-kind-function tsd-is-external"><a href="modules.html#effectScope" class="tsd-kind-icon">effect<wbr/>Scope</a></li><li class="tsd-kind-function tsd-is-external"><a href="modules.html#enableTracking" class="tsd-kind-icon">enable<wbr/>Tracking</a></li><li class="tsd-kind-function tsd-is-external"><a href="modules.html#getCurrentScope" class="tsd-kind-icon">get<wbr/>Current<wbr/>Scope</a></li><li class="tsd-kind-function tsd-is-external"><a href="modules.html#isProxy" class="tsd-kind-icon">is<wbr/>Proxy</a></li><li class="tsd-kind-function tsd-is-external"><a href="modules.html#isReactive" class="tsd-kind-icon">is<wbr/>Reactive</a></li><li class="tsd-kind-function tsd-is-external"><a href="modules.html#isReadonly" class="tsd-kind-icon">is<wbr/>Readonly</a></li><li class="tsd-kind-function tsd-has-type-parameter tsd-is-external"><a href="modules.html#isRef" class="tsd-kind-icon">is<wbr/>Ref</a></li><li class="tsd-kind-function tsd-is-external"><a href="modules.html#isShallow" class="tsd-kind-icon">is<wbr/>Shallow</a></li><li class="tsd-kind-function tsd-has-type-parameter tsd-is-external"><a href="modules.html#markRaw" class="tsd-kind-icon">mark<wbr/>Raw</a></li><li class="tsd-kind-function tsd-is-external"><a href="modules.html#onScopeDispose" class="tsd-kind-icon">on<wbr/>Scope<wbr/>Dispose</a></li><li class="tsd-kind-function tsd-is-external"><a href="modules.html#pauseTracking" class="tsd-kind-icon">pause<wbr/>Tracking</a></li><li class="tsd-kind-function tsd-has-type-parameter tsd-is-external"><a href="modules.html#proxyRefs" class="tsd-kind-icon">proxy<wbr/>Refs</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#closestFeature" class="tsd-kind-icon">query<wbr/>Feature</a></li><li class="tsd-kind-function"><a href="modules.html#querySelector" class="tsd-kind-icon">query<wbr/>Selector</a></li><li class="tsd-kind-function tsd-has-type-parameter tsd-is-external"><a href="modules.html#reactive" class="tsd-kind-icon">reactive</a></li><li class="tsd-kind-function tsd-has-type-parameter tsd-is-external"><a href="modules.html#readonly" class="tsd-kind-icon">readonly</a></li><li class="tsd-kind-function tsd-has-type-parameter tsd-is-external"><a href="modules.html#ref" class="tsd-kind-icon">ref</a></li><li class="tsd-kind-function tsd-is-external"><a href="modules.html#resetTracking" class="tsd-kind-icon">reset<wbr/>Tracking</a></li><li class="tsd-kind-function"><a href="modules.html#setEvalGlobals" class="tsd-kind-icon">set<wbr/>Eval<wbr/>Globals</a></li><li class="tsd-kind-function tsd-has-type-parameter tsd-is-external"><a href="modules.html#shallowReactive" class="tsd-kind-icon">shallow<wbr/>Reactive</a></li><li class="tsd-kind-function tsd-has-type-parameter tsd-is-external"><a href="modules.html#shallowReadonly" class="tsd-kind-icon">shallow<wbr/>Readonly</a></li><li class="tsd-kind-function tsd-has-type-parameter tsd-is-external"><a href="modules.html#shallowRef" class="tsd-kind-icon">shallow<wbr/>Ref</a></li><li class="tsd-kind-function"><a href="modules.html#startDomObserver" class="tsd-kind-icon">start<wbr/>Dom<wbr/>Observer</a></li><li class="tsd-kind-function tsd-is-external"><a href="modules.html#stop" class="tsd-kind-icon">stop</a></li><li class="tsd-kind-function"><a href="modules.html#stopDomObserver" class="tsd-kind-icon">stop<wbr/>Dom<wbr/>Observer</a></li><li class="tsd-kind-function"><a href="modules.html#subscribeNode" class="tsd-kind-icon">subscribe<wbr/>Node</a></li><li class="tsd-kind-function tsd-has-type-parameter tsd-is-external"><a href="modules.html#toRaw" class="tsd-kind-icon">to<wbr/>Raw</a></li><li class="tsd-kind-function tsd-has-type-parameter tsd-is-external"><a href="modules.html#toRef" class="tsd-kind-icon">to<wbr/>Ref</a></li><li class="tsd-kind-function tsd-has-type-parameter tsd-is-external"><a href="modules.html#toRefs" class="tsd-kind-icon">to<wbr/>Refs</a></li><li class="tsd-kind-function tsd-is-external"><a href="modules.html#track" class="tsd-kind-icon">track</a></li><li class="tsd-kind-function tsd-is-external"><a href="modules.html#trigger" class="tsd-kind-icon">trigger</a></li><li class="tsd-kind-function tsd-is-external"><a href="modules.html#triggerRef" class="tsd-kind-icon">trigger<wbr/>Ref</a></li><li class="tsd-kind-function tsd-has-type-parameter tsd-is-external"><a href="modules.html#unref" class="tsd-kind-icon">unref</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>